<!DOCTYPE html>
<html lang="en" style="height:1700px;">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="/video.css"/>
    <style>
        .videoSemiContainer{
            width : 100%;
            height : 100%;
        }

        .videoSpace{
            width : 100%;
            height : 100%;
            display:grid;
            grid-template-columns: 33% 33% 33%;
            grid-column-gap: 10px;
            grid-row-gap: 1em;
        }
        .eachVideo{
            margin: 20px;
            border:1px solid black;
        }
    </style>
    
</head>
<body>
    <input type="hidden" id="ipConfig" value="<%-include('./ipConfig.ejs')%>"/>

    <div id="container">
        <!-- 맨위 왼쪽의 로고와 오른쪽의 메뉴들을 담는 topcontainer -->
        <div id="topLongContainer" class="bg_cont">
            
            <div id="topLongContainerInnerLeftLogoImg" class="bg_cont">
                <a href="<%-include('./ipConfig.ejs')%>/web/introduce"><img id="topLongContainerInnerLeftLogoImg_Img" src="/webimg/HSC_mini.png"/></a>
            </div>
            <!--topLongContainerInnerLeftLogoImg 끝-->
            <!-- 맨위 오른쪽 메뉴들 (홈페이지, 로그인/회원가입 , 학습 , 메뉴 등-->
            <div id="topLongContainerInnerRightMenuList" class="bg_cont">
                <a href="<%-include('./ipConfig.ejs')%>/web/introduce">홈페이지</a>
                <a href="<%-include('./ipConfig.ejs')%>/web/market">제휴 스토어</a>
                <a href="<%-include('./ipConfig.ejs')%>/web/menuList" id="learning">학습</a>
                <a href="<%-include('./ipConfig.ejs')%>/web/mypage" id="myPage">My page</a>
            </div>
            <!--topLongContainerInnerRightMenuList 끝-->
        </div>
        <!-- topLongContainer 끝 -->

        <div id="contentsContainer">

            <!--문제, 문제집, 채점현황, 강의 메뉴들-->
            <div id="topText">
                <div id="topTextRightMenu">
                    <a href="#">문제집</a>
                    <!--<a href="http://220.67.231.91:80/web/video" id="lecture">강의</a>-->
                </div>
            </div>
            <!--topText 끝-->

            <div id="videoContainer">

                <!-- grid 레이아웃으로 video 정렬하면 될것같은데 -->
                <div class="videoSemiContainer">
                    <!-- 결론적으로 비디오를 받아오면 videoSpace를 for문 돌리게될듯
                    videosemicontainer도 2중 for로 돌릴라나..-->
                    <div class="videoSpace">
                        <% for ( let i=0;i< videoInfo.length ; i++){ %>
                        <div class="eachVideo" onclick="viewChildPage(this);">
                            <!-- 여기에 video 들어가거나 유튜브 링크? -->
                            <img src="https://img.youtube.com/vi/<%=videoInfo[i].videoUrl.split('embed')[1].substring(1,videoInfo[i].videoUrl.split('embed')[1].length)%>/0.jpg" style="width:100%; height: 100%;" />
                            <center>
                                <p style="margin-bottom: 5px; font-weight: bold;
                                font-size: 1.2rem;"><%= videoInfo[i].name %></p>
                                
                                <input type="hidden" name="videoLength" value="<%= videoInfo[i].videoLength %>"/>
                                <input type="hidden" name="description" value="<%= videoInfo[i].description %>"/>
                                <input type="hidden" name="manufacturer" value="<%= videoInfo[i].videoUrl %>"/>
                            </center>
                        </div>
                        <!--eachVideo 끝 -->
                        <% } %>
                        
                    </div>
                    <!--videoSpace 끝-->
                </div>
                <!--videoSemiContainer 끝-->
            </div>
            <!-- videoContainer 끝 -->
        </div> 
        <!--contentsContainer 끝-->
    </div>
    <!--container 끝-->

    <footer style="width: 100%;">
        <input type="hidden" name="page" value="<%= page %>"/>
        <input type="hidden" name="totalPage" value="<%= totalPage %>"/>

        <center style="color: black; font-size: 1.5rem;">
            <% if ( page == 1 ) { %>
                
            <% } else { %>
                <a href="<%-include('./ipConfig.ejs')%>/web/video/<%= parseInt(page) - 1 %> " style="color : black;"> < </a>
            <% } %>


            <%
            for(var j = 0; j < totalPage ; j++){
                if (j+1 == page) { %>
                    <a style="padding: 5px; color: black; font-size: 1.5rem; font-weight: bold;" href="<%-include('./ipConfig.ejs')%>/web/video/<%= j + 1 %>"><%= j + 1 %></a>
                <% } else { %>
                    <a style="padding: 5px; color: black; font-size: 1.5rem;" href="<%-include('./ipConfig.ejs')%>/web/video/<%= j + 1 %>"><%= j + 1 %></a>
                <% } %>
            <%
            }
            %>

            <% if ( totalPage <= page ) { %>
                
            <% } else { %>
                <a href="<%-include('./ipConfig.ejs')%>/web/video/<%= parseInt(page) + 1 %> " style="color : black;"> > </a>
            <% } %>

        </center>
    </footer>

</body>
<script>
    document.getElementById("myPage").href = document.getElementById("myPage").href + '/' + `${JSON.parse(localStorage.getItem('UserInfo')).userid}`;
</script>

<script>
    //document.domain = "220.67.231.91";
    function viewChildPage(element){
        
        try {
            const ipConfig = document.getElementById("ipConfig").value;
            var userId = JSON.parse(localStorage.getItem('UserInfo')).userid;
            var videoName = element.children[1].children[0].innerText;
            var videoUrl = element.children[1].children[3].value;
            var myWindow = window.open(`${ipConfig}/web/videoChild?userId=${userId}&videoName=${videoName}&videoUrl=${videoUrl}`,"강의창","width=1000px,height=600px");
        }catch(e){
            if (window.confirm("로그인이 되어있지 않습니다")) {
                location.href=`${ipConfig}/web/index`;
            }
        }

    }
</script>


</html>





